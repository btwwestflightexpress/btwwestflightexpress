
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User freight page</title>
    <meta name="theme-color" content="#1e90ff">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="Your Website">
    <meta name="apple-mobile-web-app-status-bar-style" content="#1e90ff">
    <link rel="stylesheet" href="freight-page.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">

<style>
     .menu-btn {
            position: fixed;
            top: 27px;
            right: 20px;
            z-index: 1001;
            font-size: 30px;
            cursor: pointer;
            color: white;
            font-size: 15px;
            letter-spacing: 0.09rem;
        }

        /* Sliding Menu */
        .top-menu {
            position: fixed;
            top: -100%;
            left: 0;
            width: 100%;
            height: 250px;
            background-color: rgba(0, 0, 0, 0.782);
            padding-top: 60px;
            transition: 0.3s;
            z-index: 1000;
            
        }

        .top-menu a {
            padding: 10px 15px;
            text-decoration: none;
            font-size: 15px;
            color: white;
            display: block;
            transition: 0.3s;
            
        }

        .top-menu a:hover {
            background-color: #575757;
        }

        /* Overlay for background when menu is open */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            visibility: hidden;
            opacity: 0;
            transition: 0.3s;
            z-index: 999;
        }

        /* Show menu and overlay */
        .top-menu.active {
            top: 0;
        }

        .overlay.active {
            visibility: visible;
            opacity: 1;
        }

    </style>
</head>
<body>

    <header>
        <!-- end of sub-header -->
<div class="nav-bar">
<div class="logo">
    <div class="first-logo"><img src="./shipping css/images/logobt.jpg" alt="" style="width: 3rem; border-radius: 20rem;"></div><br>
     BTWwestflightexpress
</div>
<span class="menu-btn">&#9776; Menu</span>

    <!-- Sliding Menu -->
    <div class="top-menu" id="topMenu">
       
        <a href="quote.html">Track</a>
                    <a href="index.html">Home</a>
    </div>

    <!-- Overlay -->
    <div class="overlay" id="overlay"></div>

</div>

<script>
const menuBtn = document.querySelector('.menu-btn');
        const topMenu = document.getElementById('topMenu');
        const overlay = document.getElementById('overlay');

        // Toggle Menu and Overlay
        menuBtn.addEventListener('click', () => {
            topMenu.classList.toggle('active');
            overlay.classList.toggle('active');
        });

        // Close Menu when clicking outside
        overlay.addEventListener('click', () => {
            topMenu.classList.remove('active');
            overlay.classList.remove('active');
        });
</script>
</header>




    <div id="freight-details-container" style="color: black;">
        <!-- Freight details will be displayed here -->
    </div><br>
    
    <div class="form">
        <a href="quote.html" style="padding: 0.7rem; text-decoration: none; color: #ffffff; background-color: rgb(22, 0, 83); border-radius: 5px; font-weight: bold;">Generate Quote</a><br><br>
       
        <form action="" id="quote-form">
            <label for="senders_name">Sender's Name</label><br>
            <input type="text" name="senders_name" id="senders_name" required placeholder="Sender's Name"><br>

            <label for="origin">Origin</label><br>
            <input type="text" name="origin" id="origin" required placeholder="Origin"><br>
            
            <label for="recievers_name">Reciever's Name</label><br>
            <input type="text" name="recievers_name" id="recievers_name" required placeholder="Reciever's Name"><br>

            <label for="recievers_phone_number">Reciever's Phone number</label><br>
            <input type="text" name="recievers_phone_number" id="recievers_phone_number" required placeholder="Reciever's Phone number"><br>

            <label for="recievers_email">Reciever's Email</label><br>
            <input type="text" name="recievers_email" id="recievers_email" required placeholder="Reciever's Email"><br>

            <label for="destination">Destination</label><br>
            <input type="text" name="destination" id="destination" required placeholder="Destination"><br>
            
           

            <label for="package_type">package type</label><br>
            <input type="text" name="package_type" id="package_type" placeholder="package type"><br>

            <label for="package_weight">Package weight</label><br>
            <input type="text" name="package_weight" id="package_weight" required placeholder="Package weight"><br>

            <label for="package_password">Package password</label><br>
            <input type="text" name="package_password" id="package_password" required placeholder="Package password"><br>

            <label for="latitude">Latitude</label><br>
            <input type="number" name="latitude" id="latitude" required placeholder="Latitude"><br>

            <label for="longitude">Longitude</label><br>
            <input type="number" name="longitude" id="longitude" required placeholder="Longitude"><br>

            <!-- <label for="longitude">Longitude</label><br>
            <input type="text" name="onhold" id="onhold" required placeholder="Specify wether package is on hold or on transit"> -->

            <button class="glow-button" type="submit">Generate quote</button>
            <button class="glow-button" type="reset">Cancel</button>
            <div id="success-message"></div>
            <button class="glow-button" id="proceed-button">View quote</button>
            
        </form>
    </div>
    <script>
            // Add this code in your client-side JavaScript file, after the document has loaded.
        document.addEventListener('DOMContentLoaded', function () {
            // Get a reference to the quote form using its ID
            const quoteForm = document.getElementById('quote-form');

            // Attach an event listener to the form for submission
            quoteForm.addEventListener('submit', function (event) {
                event.preventDefault(); // Prevent the default form submission behavior

                // Get the form input values
                const senders_name = document.getElementById('senders_name').value;
                const origin = document.getElementById('origin').value;
                const recievers_name = document.getElementById('recievers_name').value;
                const recievers_phone_number = document.getElementById('recievers_phone_number').value;
                const recievers_email = document.getElementById('recievers_email').value;
                const destination = document.getElementById('destination').value;
                const package_type = document.getElementById('package_type').value;
                const package_weight = document.getElementById('package_weight').value;
                const package_password = document.getElementById('package_password').value;
                const latitude = document.getElementById('latitude').value;
                const longitude = document.getElementById('longitude').value;

                // Create an object to represent the quote details
                const formData = {
                    senders_name: senders_name,
                    origin: origin,
                    recievers_name: recievers_name,
                    recievers_phone_number: recievers_phone_number,
                    recievers_email: recievers_email,
                    destination: destination,
                    package_type: package_type,
                    package_weight: package_weight,
                    package_password: package_password,
                    latitude: latitude,
                    longitude: longitude,
                    // Add other fields as needed
                };

                // Send an HTTP POST request to the server with the quote details
                fetch('/submit-quote', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(formData), // Convert the data to JSON format
                })
               
                // Inside your JavaScript code for handling the quote submission
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        // Quote submission was successful, and data may contain the tracking code
                        const trackingCode = data.trackingCode;

                        // Display a success message to the user
                        const successMessage = document.getElementById('success-message');
                        successMessage.textContent = 'Quote submitted successfully!';
                        alert('Quote Registered!')

                        // Show a button for the user to proceed
                        const proceedButton = document.getElementById('proceed-button');
                        proceedButton.style.display = 'block';
                    
                        // Handle button click to navigate to the next page
                        proceedButton.addEventListener('click', () => {
                            // window.location.href = `/checkout-receipt.html`;
                            window.location.href = `/checkout-receipt.html?senders_name=${senders_name}&origin=${origin}&recievers_name=${recievers_name}&recievers_phone_number=${recievers_phone_number}&recievers_email=${recievers_email}&destination=${destination}&package_type=${package_type}&package_weight=${package_weight}&tracking_code=${trackingCode}&package_password=${package_password}&latitude=${latitude}&longitude=${longitude}`;
                        });
                    } else {
                        // Handle errors, e.g., show an error message to the user
                        console.error(data.message);
                    }
                })
                .catch(error => {
                    // Handle network or server-related errors
                    console.error('Error:', error);
                });

            });
        });
    </script>
    

    <!-- <script src="//code.tidio.co/c3u6inqchllvaycdalhg5sqldo6ayjan.js" async></script> -->
</body>
</html>
